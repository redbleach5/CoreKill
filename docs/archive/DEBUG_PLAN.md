# –ü–ª–∞–Ω –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ—Ç–ª–∞–¥–∫–∏ –±—ç–∫–µ–Ω–¥–∞ Cursor Killer

## –ü—Ä–∏–Ω—Ü–∏–ø –ø—Ä–æ–≤–µ—Ä–∫–∏: –æ—Ç –±–∞–∑–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∫ —Å–ª–æ–∂–Ω—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º

–ü–ª–∞–Ω —É–ø–æ—Ä—è–¥–æ—á–µ–Ω –ø–æ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º. –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —Ç–µ–º–∏, –∫—Ç–æ –æ—Ç –Ω–µ–≥–æ –∑–∞–≤–∏—Å–∏—Ç.

---

## üî¥ –£–†–û–í–ï–ù–¨ 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ (–±–∞–∑–æ–≤—ã–µ) ‚Äî –±–µ–∑ –Ω–∏—Ö —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è

### 1.1 `utils/config.py` ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–ü–æ—á–µ–º—É –ø–µ—Ä–≤—ã–º:** –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ `config.toml` (—Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–∞–π–ª, –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç)
- ‚úÖ Singleton –ø–∞—Ç—Ç–µ—Ä–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í—Å–µ —Å–≤–æ–π—Å—Ç–≤–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è (–Ω–µ `None`)
- ‚úÖ Fallback –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç config.toml
- ‚úÖ –ú–µ—Ç–æ–¥ `reload()` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/ -k config -v
python -c "from utils.config import get_config; c = get_config(); print(c.default_model)"
```

**–õ–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- –û—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ config.toml
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

---

### 1.2 `utils/logger.py` ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–ü–æ—á–µ–º—É –≤—Ç–æ—Ä—ã–º:** –í—Å–µ –º–æ–¥—É–ª–∏ –ª–æ–≥–∏—Ä—É—é—Ç —á–µ—Ä–µ–∑ –Ω–µ–≥–æ

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–≥–µ—Ä–∞
- ‚úÖ –†–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (DEBUG, INFO, WARNING, ERROR)
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤
- ‚úÖ –ó–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª—ã (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
- ‚úÖ –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥

**–¢–µ—Å—Ç—ã:**
```bash
python -c "from utils.logger import get_logger; logger = get_logger(); logger.info('Test')"
```

---

### 1.3 `utils/env_config.py` ‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô  
**–ü–æ—á–µ–º—É —Ç—Ä–µ—Ç—å–∏–º:** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π (Pydantic)
- ‚úÖ –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚úÖ –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

**–¢–µ—Å—Ç—ã:**
```bash
python -c "from utils.env_config import EnvironmentConfig; cfg = EnvironmentConfig(); print(cfg.ollama_base_url)"
```

---

### 1.4 `backend/dependencies.py` ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–ü–æ—á–µ–º—É —á–µ—Ç–≤–µ—Ä—Ç—ã–º:** Dependency Injection –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ Singleton –ø–∞—Ç—Ç–µ—Ä–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ `get_memory_agent()` —Å–æ–∑–¥–∞—ë—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç MemoryAgent
- ‚úÖ `get_rag_system()` —Å–æ–∑–¥–∞—ë—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç RAGSystem
- ‚úÖ `reset()` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—á–∏—â–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (—Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ)

**–¢–µ—Å—Ç—ã:**
```bash
python -c "from backend.dependencies import get_memory_agent; agent = get_memory_agent(); print(type(agent))"
```

**–õ–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- "‚úÖ MemoryAgent –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω (Singleton)"
- "‚úÖ RAGSystem –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω (Singleton)"

---

### 1.5 `infrastructure/local_llm.py` ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–ü–æ—á–µ–º—É –ø—è—Ç—ã–º:** –í—Å–µ –∞–≥–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç LLM

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Ollama API
- ‚úÖ –ú–µ—Ç–æ–¥ `generate()` —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (—Ç–∞–π–º–∞—É—Ç—ã, –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Ollama)
- ‚úÖ Retry –ª–æ–≥–∏–∫–∞ —Å exponential backoff
- ‚úÖ `generate_structured()` –¥–ª—è Pydantic –º–æ–¥–µ–ª–µ–π
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (temperature, top_p, num_predict)
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è `AsyncLocalLLM`

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/test_local_llm.py -v
python -c "from infrastructure.local_llm import LocalLLM; llm = LocalLLM('phi3:mini'); print(llm.generate('Hello'))"
```

**–õ–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Ollama
- Retry –ø–æ–ø—ã—Ç–∫–∏
- –¢–∞–π–º–∞—É—Ç—ã

---

## üü† –£–†–û–í–ï–ù–¨ 2: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–æ—Å–Ω–æ–≤–∞ –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤)

### 2.1 `infrastructure/connection_pool.py` ‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô  
**–ü–æ—á–µ–º—É –ø–µ—Ä–≤—ã–º –≤ —É—Ä–æ–≤–Ω–µ 2:** Connection pooling –¥–ª—è Ollama

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- ‚úÖ HTTP/2 –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- ‚úÖ Graceful shutdown
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

**–¢–µ—Å—Ç—ã:**
```bash
python -c "from infrastructure.connection_pool import get_ollama_pool; import asyncio; asyncio.run(get_ollama_pool())"
```

---

### 2.2 `infrastructure/model_router.py` ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–ü–æ—á–µ–º—É –≤—Ç–æ—Ä—ã–º:** –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞—á–∏

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π Ollama
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞—á–∏ (SIMPLE/MEDIUM/COMPLEX)
- ‚úÖ –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–æ–¥–µ–ª—è—Ö
- ‚úÖ Reasoning –º–æ–¥–µ–ª–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ Fallback –Ω–∞ –¥–µ—Ñ–æ–ª—Ç–Ω—É—é –º–æ–¥–µ–ª—å

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/ -k model_router -v
python -c "from infrastructure.model_router import get_model_router; router = get_model_router(); print(router.select_model('SIMPLE', 'test'))"
```

**–õ–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
- –í—ã–±—Ä–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –∑–∞–¥–∞—á–∏
- –û—à–∏–±–∫–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π

---

### 2.3 `infrastructure/workflow_state.py` ‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô  
**–ü–æ—á–µ–º—É —Ç—Ä–µ—Ç—å–∏–º:** State —Å—Ö–µ–º–∞ –¥–ª—è LangGraph

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `AgentState` (TypedDict)
- ‚úÖ –í—Å–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
- ‚úÖ –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**–¢–µ—Å—Ç—ã:**
```bash
python -c "from infrastructure.workflow_state import AgentState; print(AgentState.__annotations__)"
```

---

### 2.4 `infrastructure/workflow_nodes.py` ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–ü–æ—á–µ–º—É —á–µ—Ç–≤–µ—Ä—Ç—ã–º:** –£–∑–ª—ã –≥—Ä–∞—Ñ–∞ workflow

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –í—Å–µ —É–∑–ª—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã (intent, planner, researcher, coder, validator, debugger, fixer, reflection, critic)
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å —É–∑–ª–æ–≤ (async def)
- ‚úÖ –î–µ–∫–æ—Ä–∞—Ç–æ—Ä `@workflow_node` –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ —É–∑–ª–∞—Ö
- ‚úÖ –°—Ç—Ä–∏–º–∏–Ω–≥–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ —É–∑–ª–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —É–∑–ª–∞—Ö

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/test_workflow_langgraph.py -v
```

**–õ–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- –ó–∞–ø—É—Å–∫ –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞
- –û—à–∏–±–∫–∏ –≤ —É–∑–ª–∞—Ö
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É–∑–ª–æ–≤

---

### 2.5 `infrastructure/workflow_edges.py` ‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô  
**–ü–æ—á–µ–º—É –ø—è—Ç—ã–º:** –£—Å–ª–æ–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –≤ –≥—Ä–∞—Ñ–µ

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ `should_skip_greeting()` –ª–æ–≥–∏–∫–∞
- ‚úÖ `should_continue_self_healing()` –ª–æ–≥–∏–∫–∞
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è ("skip"/"continue"/"finish")
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ edge cases

**–¢–µ—Å—Ç—ã:**
```bash
python -c "from infrastructure.workflow_edges import should_skip_greeting; state = {'intent': {'type': 'greeting'}}; print(should_skip_greeting(state))"
```

---

### 2.6 `infrastructure/workflow_graph.py` ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–ü–æ—á–µ–º—É —à–µ—Å—Ç—ã–º:** –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≥—Ä–∞—Ñ–∞ LangGraph

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∞ (`StateGraph`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —É–∑–ª–æ–≤
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä—ë–±–µ—Ä (–ø–µ—Ä–µ—Ö–æ–¥–æ–≤)
- ‚úÖ –£—Å–ª–æ–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≥—Ä–∞—Ñ–∞ —É—Å–ø–µ—à–Ω–∞
- ‚úÖ –ì—Ä–∞—Ñ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å

**–¢–µ—Å—Ç—ã:**
```bash
python -c "from infrastructure.workflow_graph import create_workflow_graph; graph = create_workflow_graph(); print('Graph created')"
```

**–õ–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- "‚úÖ LangGraph workflow —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω"

---

### 2.7 `backend/sse_manager.py` ‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô  
**–ü–æ—á–µ–º—É —Å–µ–¥—å–º—ã–º:** SSE —Å—Ç—Ä–∏–º–∏–Ω–≥ –¥–ª—è frontend

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ SSE —Å–æ–±—ã—Ç–∏–π
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π —á–µ—Ä–µ–∑ SSE
- ‚úÖ –§–æ—Ä–º–∞—Ç —Å–æ–±—ã—Ç–∏–π (event, data)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑—Ä—ã–≤–æ–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- ‚úÖ –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π

**–¢–µ—Å—Ç—ã:**
```bash
python -c "from backend.sse_manager import SSEManager; manager = SSEManager(); manager.stream_stage_start('test', 'message')"
```

---

## üü° –£–†–û–í–ï–ù–¨ 3: –ê–≥–µ–Ω—Ç—ã (–æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)

### 3.1 `agents/intent.py` ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–ü–æ—á–µ–º—É –ø–µ—Ä–≤—ã–º:** –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –∑–∞–¥–∞—á–∏ –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ `determine_intent()` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø (greeting, help, chat, code)
- ‚úÖ `determine_complexity()` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å (SIMPLE/MEDIUM/COMPLEX)
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ `is_greeting_fast()` —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏ (intent_model)
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ (Pydantic)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/test_intent.py -v
python -c "from agents.intent import IntentAgent; agent = IntentAgent(); result = agent.determine_intent('–ø—Ä–∏–≤–µ—Ç'); print(result.type)"
```

**–õ–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- –û–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π —Ç–∏–ø –Ω–∞–º–µ—Ä–µ–Ω–∏—è
- –û–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
- –û—à–∏–±–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

---

### 3.2 `agents/conversation.py` ‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô  
**–ü–æ—á–µ–º—É –≤—Ç–æ—Ä—ã–º:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π –¥–∏–∞–ª–æ–≥–æ–≤

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–æ–æ–±—â–µ–Ω–∏–π)
- ‚úÖ –ê–≤—Ç–æ—Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª—ã (`output/conversations/`)
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∏–∞–ª–æ–≥–∞ –ø–æ ID

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/test_memory.py -v
python -c "from agents.conversation import ConversationMemory; mem = ConversationMemory(); conv = mem.get_or_create_conversation('test'); mem.add_message('test', 'user', 'hello')"
```

---

### 3.3 `agents/chat.py` ‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô  
**–ü–æ—á–µ–º—É —Ç—Ä–µ—Ç—å–∏–º:** Chat —Ä–µ–∂–∏–º (–ø—Ä–æ—Å—Ç–æ–π –¥–∏–∞–ª–æ–≥)

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ `chat()` –º–µ—Ç–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (–Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–¥)
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –¥–ª—è SIMPLE –∑–∞–¥–∞—á
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å (chat_model)

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/ -k chat -v
```

---

### 3.4 `agents/planner.py` ‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô  
**–ü–æ—á–µ–º—É —á–µ—Ç–≤–µ—Ä—Ç—ã–º:** –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ `create_plan()` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–ª–∞–Ω
- ‚úÖ –ü–ª–∞–Ω —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω –∏ –ø–æ–Ω—è—Ç–µ–Ω
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
- ‚úÖ Streaming –≤–µ—Ä—Å–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (`StreamingPlannerAgent`)

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/test_planner.py -v
```

---

### 3.5 `agents/researcher.py` ‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô  
**–ü–æ—á–µ–º—É –ø—è—Ç—ã–º:** –°–±–æ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (RAG + –≤–µ–±-–ø–æ–∏—Å–∫)

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã (–µ—Å–ª–∏ project_path —É–∫–∞–∑–∞–Ω)
- ‚úÖ RAG –ø–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í–µ–±-–ø–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç (–µ—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω)
- ‚úÖ –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/test_researcher.py -v
pytest tests/test_rag.py -v
pytest tests/test_web_search.py -v
```

---

### 3.6 `agents/test_generator.py` ‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô  
**–ü–æ—á–µ–º—É —à–µ—Å—Ç—ã–º:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ (TDD)

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ `generate_tests()` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç pytest —Ç–µ—Å—Ç—ã
- ‚úÖ –¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–Ω—ã (—Å–∏–Ω—Ç–∞–∫—Å–∏—Å Python)
- ‚úÖ –¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –∑–∞–¥–∞—á—É
- ‚úÖ Streaming –≤–µ—Ä—Å–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/ -k test_generator -v
```

---

### 3.7 `agents/coder.py` ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–ü–æ—á–µ–º—É —Å–µ–¥—å–º—ã–º:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ (–æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è)

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ `generate_code()` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–¥
- ‚úÖ –ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∑–∞–¥–∞—á–µ
- ‚úÖ –ö–æ–¥ –≤–∞–ª–∏–¥–µ–Ω (—Å–∏–Ω—Ç–∞–∫—Å–∏—Å)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–ø–ª–∞–Ω, —Ç–µ—Å—Ç—ã, –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ)
- ‚úÖ Streaming –≤–µ—Ä—Å–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (`StreamingCoderAgent`)

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/test_coder.py -v
pytest tests/test_streaming_coder.py -v
```

**–õ–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
- –û—à–∏–±–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

---

### 3.8 `utils/validation.py` ‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô  
**–ü–æ—á–µ–º—É –≤–æ—Å—å–º—ã–º:** –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–¥–∞ (pytest, mypy, bandit)

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ `validate_code()` –∑–∞–ø—É—Å–∫–∞–µ—Ç pytest
- ‚úÖ `validate_code()` –∑–∞–ø—É—Å–∫–∞–µ—Ç mypy
- ‚úÖ `validate_code()` –∑–∞–ø—É—Å–∫–∞–µ—Ç bandit
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/test_validators.py -v
python -c "from utils.validation import validate_code; result = validate_code('def test(): pass'); print(result)"
```

---

### 3.9 `agents/debugger.py` ‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô  
**–ü–æ—á–µ–º—É –¥–µ–≤—è—Ç—ã–º:** –ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ `analyze_errors()` –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∏—á–∏–Ω—É –æ—à–∏–±–æ–∫
- ‚úÖ –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ Streaming –≤–µ—Ä—Å–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/test_debugger.py -v
```

---

### 3.10 `agents/incremental_coder.py` –∏–ª–∏ `agents/streaming_coder.py` ‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô  
**–ü–æ—á–µ–º—É –¥–µ—Å—è—Ç—ã–º:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—á–µ–≥–æ –∫–æ–¥–∞
- ‚úÖ –ò—Ç–µ—Ä–∞—Ü–∏–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/test_incremental_coder.py -v
```

---

### 3.11 `agents/reflection.py` ‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô  
**–ü–æ—á–µ–º—É –æ–¥–∏–Ω–Ω–∞–¥—Ü–∞—Ç—ã–º:** –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ `reflect()` –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ (planning, research, testing, coding, overall)
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –∏ —É–ª—É—á—à–µ–Ω–∏—è
- ‚úÖ –†–µ—à–µ–Ω–∏–µ –æ retry

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/test_reflection.py -v
```

---

### 3.12 `agents/critic.py` ‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô  
**–ü–æ—á–µ–º—É –¥–≤–µ–Ω–∞–¥—Ü–∞—Ç—ã–º:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
- ‚úÖ –í—ã—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/ -k critic -v
```

---

### 3.13 `agents/memory.py` ‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô  
**–ü–æ—á–µ–º—É —Ç—Ä–∏–Ω–∞–¥—Ü–∞—Ç—ã–º:** –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –ø–∞–º—è—Ç—å

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π –≤ RAG
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –∑–∞–¥–∞—á
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –≤ –Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á–∞—Ö

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/test_memory.py -v
```

---

## üü¢ –£–†–û–í–ï–ù–¨ 4: API –∏ —Ä–æ—É—Ç–∏–Ω–≥

### 4.1 `backend/api.py` ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–ü–æ—á–µ–º—É –ø–µ—Ä–≤—ã–º:** –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ Lifespan (startup/shutdown)
- ‚úÖ Middleware (CORS, rate limiting)
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–æ–≤
- ‚úÖ Health check endpoint
- ‚úÖ Graceful shutdown

**–¢–µ—Å—Ç—ã:**
```bash
python -c "from backend.api import app; print(app.title)"
curl http://localhost:8000/health
```

**–õ–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- "üöÄ Backend API –∑–∞–ø—É—â–µ–Ω"
- "‚úÖ Lifespan startup –∑–∞–≤–µ—Ä—à—ë–Ω"

---

### 4.2 `backend/routers/agent.py` ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–ü–æ—á–µ–º—É –≤—Ç–æ—Ä—ã–º:** –û—Å–Ω–æ–≤–Ω–æ–π —Ä–æ—É—Ç–µ—Ä —Å workflow

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ `/api/stream` endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –†–æ—É—Ç–∏–Ω–≥ —Ä–µ–∂–∏–º–æ–≤ (auto/chat/code)
- ‚úÖ `run_workflow_stream()` –∑–∞–ø—É—Å–∫–∞–µ—Ç workflow
- ‚úÖ `run_chat_stream()` –∑–∞–ø—É—Å–∫–∞–µ—Ç chat
- ‚úÖ SSE —Å—Ç—Ä–∏–º–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ (task, mode, model, temperature)

**–¢–µ—Å—Ç—ã:**
```bash
curl -N "http://localhost:8000/api/stream?task=hello&mode=chat"
```

**–õ–æ–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- –ó–∞–ø—É—Å–∫ workflow
- –°–æ–±—ã—Ç–∏—è SSE
- –û—à–∏–±–∫–∏ –≤ —Ä–æ—É—Ç–µ—Ä–µ

---

### 4.3 `backend/routers/code_executor.py` ‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô  
**–ü–æ—á–µ–º—É —Ç—Ä–µ—Ç—å–∏–º:** –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ `/api/execute` endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ –¢–∞–π–º–∞—É—Ç—ã

**–¢–µ—Å—Ç—ã:**
```bash
curl -X POST http://localhost:8000/api/execute -H "Content-Type: application/json" -d '{"code": "print(1+1)"}'
```

---

### 4.4 `backend/routers/metrics.py` ‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–ò–ó–ö–ò–ô  
**–ü–æ—á–µ–º—É —á–µ—Ç–≤–µ—Ä—Ç—ã–º:** –ú–µ—Ç—Ä–∏–∫–∏

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ `/api/metrics` endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫
- ‚úÖ –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

---

### 4.5 `backend/routers/database.py` ‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–ò–ó–ö–ò–ô  
**–ü–æ—á–µ–º—É –ø—è—Ç—ã–º:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–î

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ Endpoints –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏

---

## üîµ –£–†–û–í–ï–ù–¨ 5: –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏

### 5.1 `infrastructure/rag.py` ‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô  
**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ChromaDB
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ –∑–∞–ø—Ä–æ—Å—É
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–π

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/test_rag.py -v
```

---

### 5.2 `infrastructure/web_search.py` ‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô  
**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ Tavily/DuckDuckGo
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –¢–∞–π–º–∞—É—Ç—ã

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/test_web_search.py -v
```

---

### 5.3 `infrastructure/context_engine.py` ‚≠ê‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô  
**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —á–∞–Ω–∫–∏
- ‚úÖ –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/test_context_engine.py -v
```

---

### 5.4 `infrastructure/reasoning_stream.py` ‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–ò–ó–ö–ò–ô  
**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ `<think>` –±–ª–æ–∫–æ–≤
- ‚úÖ –°—Ç—Ä–∏–º–∏–Ω–≥ reasoning

**–¢–µ—Å—Ç—ã:**
```bash
pytest tests/test_reasoning_stream.py -v
```

---

### 5.5 `utils/token_counter.py` ‚≠ê‚≠ê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–ò–ó–ö–ò–ô  
**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –ü–æ–¥—Å—á—ë—Ç —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º:
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ Ollama –∑–∞–ø—É—â–µ–Ω
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –º–æ–¥–µ–ª–µ–π (`ollama list`)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `config.toml` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –≤–∞–ª–∏–¥–µ–Ω
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–≤–Ω—è:
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã —É—Ä–æ–≤–Ω—è
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

### –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å backend (`python run.py`)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health endpoint
- [ ] –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ API
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å frontend –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

---

## üö® –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: Ollama –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `ollama serve`, –ø–æ—Ä—Ç 11434

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–æ–¥–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
**–†–µ—à–µ–Ω–∏–µ:** `ollama pull <model_name>`

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –≤ config.toml
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å TOML, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### –ü—Ä–æ–±–ª–µ–º–∞: Workflow –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `workflow_graph.py`, –≤—Å–µ —É–∑–ª—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã

### –ü—Ä–æ–±–ª–µ–º–∞: SSE –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `sse_manager.py`, —Ñ–æ—Ä–º–∞—Ç —Å–æ–±—ã—Ç–∏–π

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

- ‚úÖ –í—Å–µ –º–æ–¥—É–ª–∏ —É—Ä–æ–≤–Ω—è 1 —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –í—Å–µ –º–æ–¥—É–ª–∏ —É—Ä–æ–≤–Ω—è 2 —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –í—Å–µ –∞–≥–µ–Ω—Ç—ã —É—Ä–æ–≤–Ω—è 3 –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—Å—Ç—É—é –∑–∞–¥–∞—á—É
- ‚úÖ API endpoints –æ—Ç–≤–µ—á–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ Workflow –ø—Ä–æ—Ö–æ–¥–∏—Ç –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞
- ‚úÖ –õ–æ–≥–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

---

## üîÑ –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ä–æ–≤–Ω—è 1** ‚Üí –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ä–æ–≤–Ω—è 2** ‚Üí –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ä–æ–≤–Ω—è 3** ‚Üí –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ä–æ–≤–Ω—è 4** ‚Üí –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Üí –ø–æ–ª–Ω—ã–π workflow
6. **–ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2026-01-21  
**–í–µ—Ä—Å–∏—è:** 1.0
