# –û—Ç—á–µ—Ç –æ–± –∞—É–¥–∏—Ç–µ –∏–º–ø–æ—Ä—Ç–æ–≤ –∏ CORS

**–î–∞—Ç–∞:** 2026-01-21  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

---

## üîç –ü—Ä–æ–≤–µ–¥–µ–Ω–Ω—ã–π –∞—É–¥–∏—Ç

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤

**–°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç:** `scripts/check_imports.py`

**–ü—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `api` –±–µ–∑ –∏–º–ø–æ—Ä—Ç–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `useLocalStorage` –±–µ–∑ –∏–º–ø–æ—Ä—Ç–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `useLocalStorageString` –±–µ–∑ –∏–º–ø–æ—Ä—Ç–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `useModels` –±–µ–∑ –∏–º–ø–æ—Ä—Ç–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `useApi` –±–µ–∑ –∏–º–ø–æ—Ä—Ç–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

---

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ 1: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–º–ø–æ—Ä—Ç–∞ `useLocalStorage` –≤ `SettingsPanel.tsx`

**–û—à–∏–±–∫–∞:**
```
SettingsPanel.tsx:45 Uncaught ReferenceError: useLocalStorage is not defined
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç: `import { useLocalStorage } from '../hooks/useLocalStorage'`

---

#### ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ 2: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–º–ø–æ—Ä—Ç–∞ `api` –≤ `ChatHistory.tsx`

**–û—à–∏–±–∫–∞:**
```
ChatHistory.tsx:131 –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∏–∞–ª–æ–≥–æ–≤: ReferenceError: api is not defined
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç: `import { api } from '../services/apiClient'`

---

#### ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ 3: CORS –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç DELETE –º–µ—Ç–æ–¥

**–û—à–∏–±–∫–∞:**
```
Access to fetch at 'http://localhost:8000/api/conversations/...' from origin 'http://localhost:5173' 
has been blocked by CORS policy: Response to preflight request doesn't pass access control check: 
It does not have HTTP ok status.
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –í CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—ã–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ –º–µ—Ç–æ–¥—ã: `["GET", "POST", "OPTIONS"]`
- DELETE –∑–∞–ø—Ä–æ—Å—ã –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏—Å—å

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã: `["GET", "POST", "DELETE", "PUT", "PATCH", "OPTIONS"]`
- –§–∞–π–ª: `backend/api.py` (—Å—Ç—Ä–æ–∫–∞ 197)

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- ‚úÖ `ChatHistory.tsx` - –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ `SettingsPanel.tsx` - –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ `MetricsDashboard.tsx` - –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ `IDEPanel.tsx` - –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ `SidebarOptions.tsx` - –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ `MessageList.tsx` - –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

**–•—É–∫–∏:**
- ‚úÖ `useAgentStream.ts` - –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ `useCodeExecution.ts` - –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ `useModels.ts` - –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ `useApi.ts` - –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ `useLocalStorage.ts` - –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

**–£—Ç–∏–ª–∏—Ç—ã:**
- ‚úÖ `modelUtils.ts` - –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- ‚úÖ `App.tsx` - –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

---

## üõ†Ô∏è –°–æ–∑–¥–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–º–ø–æ—Ä—Ç–æ–≤

**–§–∞–π–ª:** `scripts/check_imports.py`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python3 scripts/check_imports.py
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ `.ts` –∏ `.tsx` —Ñ–∞–π–ª—ã –≤ `frontend/src/`
- –ò—â–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π/—Ö—É–∫–æ–≤ –±–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
- –í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–±–ª–µ–º —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ñ–∞–π–ª–∞ –∏ —Å—Ç—Ä–æ–∫–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π)

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### Backend: CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–§–∞–π–ª:** `backend/api.py`

**–ë—ã–ª–æ:**
```python
allow_methods=["GET", "POST", "OPTIONS"],
```

**–°—Ç–∞–ª–æ:**
```python
allow_methods=["GET", "POST", "DELETE", "PUT", "PATCH", "OPTIONS"],
```

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∏–º–ø–æ—Ä—Ç–æ–≤ –≤ CI/CD –∏–ª–∏ pre-commit hook

**–ü—Ä–∏–º–µ—Ä –¥–ª—è pre-commit:**
```bash
# .git/hooks/pre-commit
#!/bin/bash
python3 scripts/check_imports.py
if [ $? -ne 0 ]; then
    echo "‚ùå –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –∏–º–ø–æ—Ä—Ç–∞–º–∏. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º."
    exit 1
fi
```

### 2. TypeScript —Å—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í–∫–ª—é—á–∏—Ç—å —Å—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º TypeScript –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–º–ø–æ—Ä—Ç–æ–≤

**–§–∞–π–ª:** `tsconfig.json`
```json
{
  "compilerOptions": {
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true
  }
}
```

### 3. ESLint –ø—Ä–∞–≤–∏–ª–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å ESLint –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–º–ø–æ—Ä—Ç–æ–≤

**–ü—Ä–∏–º–µ—Ä:**
```json
{
  "rules": {
    "no-undef": "error",
    "@typescript-eslint/no-unused-vars": "error"
  }
}
```

### 4. –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ó–∞–ø—É—Å–∫–∞—Ç—å `scripts/check_imports.py` –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∫–æ–º–º–∏—Ç–æ–º –∏–ª–∏ –≤ CI/CD

---

## üéØ –ò—Ç–æ–≥–∏

‚úÖ **–í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∏–º–ø–æ—Ä—Ç—ã
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

‚úÖ **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã:**
- `scripts/check_imports.py` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤

‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞:**
- –°–æ–∑–¥–∞–Ω –æ—Ç—á–µ—Ç –æ–± –∞—É–¥–∏—Ç–µ
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2026-01-21  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã, –∞—É–¥–∏—Ç –∑–∞–≤–µ—Ä—à–µ–Ω
