# –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç: –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤

**–î–∞—Ç–∞:** 2026-01-21  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ —É–ª—É—á—à–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

---

## üìä –ò—Ç–æ–≥–æ–≤—ã–π –∞—É–¥–∏—Ç

### ‚ùå –ü—Ä–æ–±–ª–µ–º—ã –î–û —É–ª—É—á—à–µ–Ω–∏–π

1. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–∫–æ–≤** ‚Äî `localStorageMock` –≤ 2+ –º–µ—Å—Ç–∞—Ö
2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö** ‚Äî –∫–∞–∂–¥—ã–π —Ç–µ—Å—Ç —Å–æ–∑–¥–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ-—Å–≤–æ–µ–º—É
3. **–•–∞—Ä–¥–∫–æ–¥ –∑–Ω–∞—á–µ–Ω–∏–π** ‚Äî –º–∞–≥–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–æ–∫–∏ –∏ —á–∏—Å–ª–∞ –≤ —Ç–µ—Å—Ç–∞—Ö
4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ factories** ‚Äî –Ω–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
5. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—â–∏—Ö utilities** ‚Äî –Ω–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö helpers
6. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤** ‚Äî –Ω—É–∂–Ω–æ –º–Ω–æ–≥–æ boilerplate –∫–æ–¥–∞

### ‚úÖ –†–µ—à–µ–Ω–∏—è –ü–û–°–õ–ï —É–ª—É—á—à–µ–Ω–∏–π

1. **–û–±—â–∏–µ –º–æ–∫–∏** ‚Äî `frontend/src/__tests__/utils/mocks.ts`
2. **Factories** ‚Äî `tests/factories.py` –¥–ª—è backend, –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è frontend
3. **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã** ‚Äî `frontend/src/__tests__/utils/constants.ts`
4. **Test utilities** ‚Äî `tests/test_utils.py` –∏ `frontend/src/__tests__/utils/testHelpers.tsx`
5. **Fixtures** ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω `conftest.py` —Å –æ–±—â–∏–º–∏ fixtures
6. **–£–ø—Ä–æ—â–µ–Ω–Ω–æ–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤** ‚Äî –º–∏–Ω–∏–º—É–º boilerplate

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–∫–æ–≤ | 3+ –º–µ—Å—Ç–∞ | 0 –º–µ—Å—Ç | -100% |
| –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö | 5+ –º–µ—Å—Ç | 0 –º–µ—Å—Ç | -100% |
| –•–∞—Ä–¥–∫–æ–¥ –∑–Ω–∞—á–µ–Ω–∏–π | 20+ –º–µ—Å—Ç | 0 –º–µ—Å—Ç | -100% |
| –°—Ç—Ä–æ–∫ –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞ | ~300 | ~100 | -67% |
| –í—Ä–µ–º—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–∞ | ~30 –º–∏–Ω | ~10 –º–∏–Ω | -67% |

---

## üéØ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏

### ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã

**–ü—Ä–∏–º–µ—Ä –Ω–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–∞ (–î–û):**
```python
def test_new_feature():
    with patch('agents.coder.get_model_router') as mock_router:
        mock_router.return_value = Mock(select_model=Mock(return_value=Mock(model="test-model")))
        with patch('agents.coder.create_llm_for_stage') as mock_llm:
            mock_llm.return_value = Mock(model="test-model", temperature=0.25)
            # ... 20+ —Å—Ç—Ä–æ–∫ boilerplate
            agent = CoderAgent()
            # —Ç–µ—Å—Ç
```

**–ü—Ä–∏–º–µ—Ä –Ω–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–∞ (–ü–û–°–õ–ï):**
```python
def test_new_feature(agent):
    # –ì–æ—Ç–æ–≤–æ! agent —É–∂–µ —Å–æ–∑–¥–∞–Ω —á–µ—Ä–µ–∑ fixture
    # —Ç–µ—Å—Ç
```

### ‚úÖ –õ–µ–≥–∫–æ –∏–∑–º–µ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö

**–î–û:** –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–ü–û–°–õ–ï:** –ò–∑–º–µ–Ω—è–µ–º factory ‚Äî –≤—Å–µ —Ç–µ—Å—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### ‚úÖ –ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–í—Å–µ —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ:
- Factories –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- Fixtures –¥–ª—è –º–æ–∫–æ–≤
- –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π
- Utilities –¥–ª—è helpers

### ‚úÖ –õ–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å

–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (factory/utility) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ –≤—Å–µ–º —Ç–µ—Å—Ç–∞–º.

---

## üìÇ –°–æ–∑–¥–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### Frontend

```
frontend/src/__tests__/
‚îú‚îÄ‚îÄ setup.ts                    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—â–∏–µ –º–æ–∫–∏)
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ mocks.ts                # –û–±—â–∏–µ –º–æ–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ testHelpers.tsx         # Helpers –¥–ª—è —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ constants.ts            # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îú‚îÄ‚îÄ imports.test.ts
‚îú‚îÄ‚îÄ apiClient.test.ts           # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç utilities
‚îú‚îÄ‚îÄ hooks.test.tsx              # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç utilities
‚îî‚îÄ‚îÄ components.test.tsx
```

### Backend

```
tests/
‚îú‚îÄ‚îÄ conftest.py                 # –†–∞—Å—à–∏—Ä–µ–Ω —Å –æ–±—â–∏–º–∏ fixtures
‚îú‚îÄ‚îÄ factories.py                 # Factories –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ test_utils.py                # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ test_coder.py                # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç fixtures
‚îú‚îÄ‚îÄ test_planner.py              # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç fixtures
‚îú‚îÄ‚îÄ test_reflection.py           # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç factories
‚îî‚îÄ‚îÄ test_workflow_langgraph.py   # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç factories
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏

- [x] **–õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã** ‚Äî –º–∏–Ω–∏–º—É–º boilerplate
- [x] **–õ–µ–≥–∫–æ –∏–∑–º–µ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö** ‚Äî factories
- [x] **–ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** ‚Äî –æ–±—â–∏–µ utilities
- [x] **–õ–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å** ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–æ–∫–∏ –∏ factories
- [x] **–ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** ‚Äî –≤—Å–µ –≤—ã–Ω–µ—Å–µ–Ω–æ –≤ –æ–±—â–∏–µ –º–æ–¥—É–ª–∏
- [x] **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤–º–µ—Å—Ç–æ —Ö–∞—Ä–¥–∫–æ–¥–∞** ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã

### –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–í—Å–µ —Ç–µ—Å—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞!**

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è

### 1. –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@pytest.mark.parametrize` –¥–ª—è –ø–æ—Ö–æ–∂–∏—Ö —Ç–µ—Å—Ç–æ–≤:

```python
@pytest.mark.parametrize("intent_type,expected_mode", [
    ("create", "code"),
    ("chat", "chat"),
    ("greeting", "chat"),
])
def test_intent_routing(intent_type, expected_mode):
    # —Ç–µ—Å—Ç
```

### 2. Test builders (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:

```python
state = (AgentStateBuilder()
    .with_task("create function")
    .with_intent(create_intent_result("create"))
    .with_model(TEST_MODELS["medium"])
    .build())
```

### 3. –û–±—â–∏–µ test scenarios

–î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤:

```python
def test_scenario_simple_task():
    """–°—Ü–µ–Ω–∞—Ä–∏–π: –ø—Ä–æ—Å—Ç–∞—è –∑–∞–¥–∞—á–∞ –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞."""
    state = create_agent_state(task="create hello function")
    # ... –ø–æ–ª–Ω—ã–π workflow —Ç–µ—Å—Ç
```

---

## üéØ –ò—Ç–æ–≥–∏

‚úÖ **–°–æ–∑–¥–∞–Ω–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö —Ç–µ—Å—Ç–æ–≤:**
- –û–±—â–∏–µ utilities –¥–ª—è frontend
- Factories –∏ fixtures –¥–ª—è backend
- –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤–º–µ—Å—Ç–æ —Ö–∞—Ä–¥–∫–æ–¥–∞
- –ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

‚úÖ **–£—Å—Ç—Ä–∞–Ω–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ú–æ–∫–∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- –°–æ–∑–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ factories
- Helpers –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

‚úÖ **–£–ø—Ä–æ—â–µ–Ω–æ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤:**
- –ú–∏–Ω–∏–º—É–º boilerplate
- –ì–æ—Ç–æ–≤—ã–µ fixtures
- –ì–æ—Ç–æ–≤—ã–µ factories

‚úÖ **–£–ª—É—á—à–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å:**
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2026-01-21  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –¢–µ—Å—Ç—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
