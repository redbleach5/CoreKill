# Основные правила (применяются ВСЕГДА)

## Видение проекта
Локальная система генерации кода, превосходящая Cursor AI:
- 100% локальная работа (Ollama + ChromaDB)
- Опциональный веб-поиск только при низкой уверенности RAG
- Строгий TDD-подход
- Модульная архитектура через LangGraph

## Стандарты кода

**Python:**
- Python 3.12+
- Type hints обязательны
- Читаемые имена переменных/функций
- Без заглушек и TODO в production коде
- Docstrings для публичных функций
- Новый функционал = новый модуль (один модуль — одна ответственность)

**Зависимости:**
- Предпочитать последние стабильные версии
- При конфликте — выбирать решение с минимальным техдолгом

## Взаимодействие

- Предупреждай о breaking changes и нарушениях архитектуры
- Честно говори если что-то не знаешь или задача выходит за рамки возможностей
- Не спрашивай лишнего — делай качественно

## Язык интерфейса

**Русский:**
- Все сообщения пользователю
- Логи в консоли
- Прогресс-бары
- Ошибки и пояснения

**Английский:**
- Имена переменных, функций, классов
- Имена файлов
- Технические логи в файлы

## Архитектурные принципы
- Простое решение лучше сложного при прочих равных
- Dependency Inversion
- Явные контракты между слоями
- UI не знает о реализации агентов
- Backend не знает о UI
- Любая фича должна быть отключаема через config.toml
- При bottleneck — выносить в отдельный сервис (микросервис по необходимости, не заранее)

## После завершения задачи
- Проверь что код компилируется без ошибок
- Если изменены сигнатуры агентов — упомяни что нужно обновить тесты (@test_sync.md)
- При работе со стримингом см. `DEPRECATION.md` для плана удаления старого кода
