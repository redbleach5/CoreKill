# Основные правила (применяются ВСЕГДА)

## Видение проекта
Локальная система генерации кода, превосходящая Cursor AI:
- 100% локальная работа (Ollama + ChromaDB)
- Опциональный веб-поиск только при низкой уверенности RAG
- Строгий TDD-подход
- Модульная архитектура через LangGraph
- Агностичность к конкретным моделям — система работает с любыми моделями Ollama

## Стандарты кода

**Python:**
- Python 3.12+
- Type hints обязательны для всех публичных функций
- Читаемые имена переменных/функций (английский)
- Без заглушек и TODO в production коде
- Docstrings для публичных функций/классов
- Один модуль — одна ответственность (Single Responsibility Principle)

**Зависимости:**
- Предпочитать последние стабильные версии
- При конфликте — выбирать решение с минимальным техдолгом
- Избегать хардкода конкретных библиотек/моделей в коде

## Взаимодействие

- Предупреждай о breaking changes и нарушениях архитектуры
- Честно говори если что-то не знаешь или задача выходит за рамки возможностей
- Не спрашивай лишнего — делай качественно

## Язык интерфейса

**Русский:**
- Все сообщения пользователю
- Логи в консоли
- Прогресс-бары
- Ошибки и пояснения

**Английский:**
- Имена переменных, функций, классов
- Имена файлов
- Технические логи в файлы

## Архитектурные принципы
- **Простота** — простое решение лучше сложного при прочих равных
- **Dependency Inversion** — зависимости через интерфейсы, не конкретные реализации
- **Явные контракты** — каждый слой имеет чёткий интерфейс
- **Разделение ответственности** — UI не знает о реализации агентов, Backend не знает о UI
- **Конфигурируемость** — любая фича должна быть отключаема через config.toml
- **Агностичность** — не привязываться к конкретным моделям/библиотекам
- **Масштабируемость** — при bottleneck выносить в отдельный сервис (не заранее)

## После завершения задачи
- Проверь что код компилируется без ошибок
- Если изменены сигнатуры агентов — упомяни что нужно обновить тесты (@test_sync.md)
- При работе со стримингом см. `DEPRECATION.md` для плана удаления старого кода
- Убедись что нет хардкода конкретных моделей — используй ModelRouter для выбора
