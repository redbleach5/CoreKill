# Конфигурация для Cursor Killer
# Переменные окружения переопределяют значения из этого файла

[default]
# Модель для embeddings (RAG) — фиксированная
embedding_model = "nomic-embed-text"

# Остальные модели выбираются автоматически через SmartModelRouter
# на основе сложности задачи. Переопределите только если нужно 
# принудительно использовать конкретную модель:
# default_model = "qwen2.5-coder:7b"

# Максимальное количество итераций self-healing
max_iterations = 5

# Включить веб-поиск по умолчанию
enable_web = true

# Температура генерации (0.1 - 0.7, ниже = детерминированнее)
temperature = 0.25

# Порог предупреждения о количестве токенов
max_tokens_warning = 30000

# Директория для артефактов
output_dir = "output"

# Роевое использование моделей (будущее расширение)
enable_model_roster = false

# === LLM Generation Limits ===
# Лимиты токенов для разных этапов генерации
# Меньшие значения = быстрее, но менее детально
# Большие значения = медленнее, но более полно

[llm]
# Максимум токенов для планирования (короткий план)
tokens_planning = 256

# Максимум токенов для генерации тестов
tokens_tests = 2048

# Максимум токенов для генерации кода
tokens_code = 4096

# Максимум токенов для анализа/рефлексии
tokens_analysis = 1024

# Максимум токенов для классификации намерения (очень короткий ответ)
tokens_intent = 128

# Максимум токенов для анализа ошибок (debug)
tokens_debug = 2048

# Максимум токенов для критического анализа
tokens_critic = 512

# === Quality Thresholds ===
# Пороги качества для оценки результатов

[quality]
# Минимальный порог качества для успешного результата (0.0-1.0)
threshold = 0.7

# Минимальный порог уверенности агентов (0.0-1.0)
confidence_threshold = 0.75

# Порог для повторного запуска (если качество ниже, should_retry = true)
retry_threshold = 0.5

# === Web Search ===
# Настройки веб-поиска (Tavily, DuckDuckGo, Google)

[web_search]
# Таймаут веб-поиска в секундах
timeout = 10

# Максимальное количество результатов
max_results = 3

# API ключ для Tavily (опционально, также можно через TAVILY_API_KEY)
# tavily_api_key = "tvly-..."

# === RAG Settings ===
# Настройки Retrieval-Augmented Generation

[rag]
# Директория для хранения ChromaDB
persist_directory = ".chromadb"

# Название коллекции для памяти задач
memory_collection = "task_memory"

# Название коллекции для кодовой базы
code_collection = "code_knowledge"

# Минимальный порог схожести для результатов RAG (0.0-1.0)
similarity_threshold = 0.5

# Максимальное количество результатов из RAG
max_results = 5

# === Context Engine (Codebase Indexing) ===
# Настройки индексации кодовой базы

[context_engine]
# Включить индексацию кодовой базы
enabled = true

# Максимальный размер контекста в токенах
max_context_tokens = 4000

# Максимальный размер чанка в токенах
max_chunk_tokens = 500

# Директория для кэша индексов
cache_directory = ".context_cache"

# Расширения файлов по умолчанию для индексации
default_extensions = [".py"]

# === Interaction Settings ===
# Настройки режимов взаимодействия

[interaction]
# Режим по умолчанию: auto, chat, code
default_mode = "auto"

# Fallback модели для chat режима (используются только если SmartModelRouter
# не нашёл подходящую модель — редкий случай)
chat_model = "phi3:mini"
chat_model_fallback = "tinyllama:1.1b"

# Автоподтверждение workflow в режиме auto
auto_confirm = true

# Показывать процесс размышления агента
show_thinking = true

# Максимум сообщений до суммаризации контекста
max_context_messages = 20

# Сохранять диалоги на диск
persist_conversations = true

# Лимит токенов для chat ответов
tokens_chat = 2048

# === Hardware Limits ===
# Лимиты для автоматического выбора моделей

[hardware]
# Максимальный размер модели в GB (0 = без лимита, автоопределение)
# Установите явно если знаете лимит вашей VRAM
max_model_vram_gb = 0

# Разрешить использование моделей 30B+ для COMPLEX задач
allow_heavy_models = true

# Разрешить использование моделей 100B+ (требует много VRAM/RAM)
allow_ultra_models = false

# === Task Persistence (Checkpoint System) ===
# Настройки сохранения состояния задач

[persistence]
# Включить систему checkpoint для сохранения состояния задач
enabled = true

# Директория для хранения checkpoint файлов
checkpoint_directory = ".task_checkpoints"

# Максимальный возраст checkpoint в часах (старые удаляются автоматически)
max_checkpoint_age_hours = 24

# Автоматически помечать задачи как paused при потере соединения
auto_pause_on_disconnect = true
